-- Disable foreign key checks to allow truncating tables if needed (though we are just inserting)
SET FOREIGN_KEY_CHECKS = 0;

-- Optional: Clean up existing data
TRUNCATE TABLE ticket_tags;
TRUNCATE TABLE tags;
TRUNCATE TABLE tickets;

-- Enable foreign key checks back
SET FOREIGN_KEY_CHECKS = 1;

-- --------------------------------------------------------
-- Seed Tags (中文标签)
-- --------------------------------------------------------
INSERT INTO tags (id, name, color) VALUES
(1, 'iOS端', '#000000'),
(2, '安卓端', '#3DDC84'),
(3, 'Web端', '#61DAFB'),
(4, '后端', '#3776AB'),
(5, '桌面端', '#5A5A5A'),
(6, '海盗项目', '#FF5733'),
(7, '阿波罗计划', '#FFC300'),
(8, '双子座', '#8E44AD'),
(9, '凤凰', '#E74C3C'),
(10, '自动补全', '#2ECC71'),
(11, '登录注册', '#3498DB'),
(12, '支付模块', '#F1C40F'),
(13, '搜索功能', '#1ABC9C'),
(14, '消息通知', '#E67E22'),
(15, '界面体验', '#D35400'),
(16, '性能优化', '#9B59B6'),
(17, '代码重构', '#95A5A6'),
(18, '缺陷Bug', '#C0392B'),
(19, '新功能', '#27AE60'),
(20, '数据库', '#34495E'),
(21, '安全隐私', '#2C3E50'),
(22, '无障碍', '#16A085'),
(23, '测试', '#7F8C8D'),
(24, '运维部署', '#D35400'),
(25, '数据分析', '#8E44AD');

-- --------------------------------------------------------
-- Seed Tickets (中文工单)
-- --------------------------------------------------------
INSERT INTO tickets (id, title, description, status, created_at, updated_at) VALUES
(1, '修复 iOS 启动时的闪退问题', '在 iPhone 12 (iOS 15) 上启动应用时会立即崩溃，需要紧急修复。', 'open', NOW(), NOW()),
(2, '实现海盗项目的落地页', '根据最新的设计规范，为海盗项目开发一个响应式的营销落地页。', 'open', NOW(), NOW()),
(3, '优化搜索功能的数据库查询', '目前的搜索结果加载过慢，需要添加索引并优化 SQL 查询语句。', 'open', NOW(), NOW()),
(4, '阿波罗搜索栏添加自动补全', '为阿波罗项目的主搜索栏集成防抖和自动补全 API。', 'closed', NOW(), NOW()),
(5, '修复安卓端登录界面布局错乱', '在小屏幕安卓设备上，登录输入框出现重叠现象。', 'open', NOW(), NOW()),
(6, '重构支付网关集成', '当前的 Stripe 实现已弃用，需要升级到最新的 API 版本。', 'open', NOW(), NOW()),
(7, 'Web端实现深色模式', '使用 Tailwind CSS 为 Web 端添加深色模式支持。', 'closed', NOW(), NOW()),
(8, '双子座：添加推送通知功能', '集成 Firebase 并处理双子座移动应用的 Token 注册逻辑。', 'open', NOW(), NOW()),
(9, '修复凤凰后台服务的内存泄漏', '后台工作进程随时间推移占用过多内存，导致服务不稳定。', 'open', NOW(), NOW()),
(10, '设计桌面端新版图标', '将旧版 FontAwesome 图标替换为自定义设计的 SVG 图标库。', 'open', NOW(), NOW()),
(11, '海盗项目：实现用户注册流程', '开发包含邮箱验证功能的注册表单。', 'closed', NOW(), NOW()),
(12, '阿波罗：修复导航栏抖动', '在仪表盘页面向下滚动时，导航栏会出现异常闪烁。', 'open', NOW(), NOW()),
(13, '更新 API 接口文档', '确保 Swagger/OpenAPI 文档与最新的后端接口保持一致。', 'open', NOW(), NOW()),
(14, '排查 API 响应缓慢问题', '在高负载下，/api/users 接口响应时间超过 2 秒。', 'open', NOW(), NOW()),
(15, '为按钮添加无障碍标签', '确保所有按钮都包含 aria-label 属性，以支持屏幕阅读器。', 'open', NOW(), NOW()),
(16, '双子座：修复头像上传失败', '上传超过 5MB 的图片时失败且无错误提示，需增加大小校验。', 'closed', NOW(), NOW()),
(17, '实现“忘记密码”流程', '开发邮箱找回密码的链接生成和重置页面。', 'open', NOW(), NOW()),
(18, '凤凰：添加数据导出功能', '允许用户将报表数据导出为 CSV 或 PDF 格式。', 'open', NOW(), NOW()),
(19, '修正新手引导页的错别字', '在介绍幻灯片中发现多处文案拼写错误。', 'closed', NOW(), NOW()),
(20, '升级 React 版本至 18', '更新 package.json 依赖并修复由此产生的破坏性变更。', 'open', NOW(), NOW()),
(21, '海盗项目：添加无限滚动加载', '将 Feed 流的分页加载替换为无限滚动，提升用户体验。', 'open', NOW(), NOW()),
(22, '保护敏感环境变量', '将密钥等敏感信息迁移至安全保险库，不再直接存储于 .env 文件。', 'open', NOW(), NOW()),
(23, '阿波罗：修复货币格式显示', '欧元区的价格符号显示错误，需统一格式化逻辑。', 'closed', NOW(), NOW()),
(24, '为认证服务编写单元测试', '增加登录注册逻辑的测试覆盖率，确保核心功能稳定。', 'open', NOW(), NOW()),
(25, '双子座：增加实时聊天功能', '基于 WebSocket 实现移动端的实时聊天模块。', 'open', NOW(), NOW()),
(26, '修复页脚的失效链接', '服务条款和隐私政策的链接报 404 错误。', 'closed', NOW(), NOW()),
(27, '凤凰：优化图表渲染性能', '大数据量下仪表盘图表渲染卡顿，需进行性能优化。', 'open', NOW(), NOW()),
(28, '添加多语言支持 (i18n)', '引入 i18next 框架，并完成基础文案的西班牙语翻译。', 'open', NOW(), NOW()),
(29, '海盗项目：修复 iPad 屏幕旋转 Bug', 'iPad 旋转至横屏模式时，页面布局会崩坏。', 'open', NOW(), NOW()),
(30, '管理员账号强制开启 2FA', '要求所有管理员登录时必须验证 Google Authenticator。', 'open', NOW(), NOW()),
(31, '阿波罗：重新设计设置页面', '对设置选项进行分类整理，优化页面布局结构。', 'open', NOW(), NOW()),
(32, '修复 Docker 构建流水线', 'CI/CD 流水线在构建步骤偶发性失败，需排查原因。', 'closed', NOW(), NOW()),
(33, '双子座：接入社交账号登录', '集成 Google 和 Apple 第三方登录，简化注册流程。', 'open', NOW(), NOW()),
(34, '重构 CSS 使用变量', '将硬编码的颜色 Hex 值替换为 CSS 主题变量。', 'open', NOW(), NOW()),
(35, '凤凰：修复日期选择器时区问题', '日期保存为 UTC 但在前端显示时未正确转换为本地时间。', 'open', NOW(), NOW()),
(36, '添加埋点统计事件', '增加“加入购物车”和“结账”环节的用户行为埋点。', 'open', NOW(), NOW()),
(37, '海盗项目：改进错误提示', '使用友好的 Toast 提示替代原生的 Alert 弹窗。', 'open', NOW(), NOW()),
(38, '阿波罗：修复模态框点击外部不关闭', '点击遮罩层时应自动关闭模态框，符合交互习惯。', 'closed', NOW(), NOW()),
(39, '优化图片资源体积', '压缩所有 PNG 图片并尽可能转换为 WebP 格式。', 'open', NOW(), NOW()),
(40, '双子座：实现搜索筛选器', '允许用户按日期、类别和状态筛选搜索结果。', 'open', NOW(), NOW()),
(41, '修复预发布环境 CORS 问题', '因缺少响应头，前端无法调用后端接口。', 'closed', NOW(), NOW()),
(42, '凤凰：添加“回到顶部”按钮', '长页面需要一个快捷按钮以便用户快速回到顶部。', 'open', NOW(), NOW()),
(43, '审查第三方依赖安全性', '审计 npm 包，修复已知的安全漏洞。', 'open', NOW(), NOW()),
(44, '海盗项目：修复默认头像显示', '当用户未上传头像时，应显示姓名首字母作为默认头像。', 'open', NOW(), NOW()),
(45, '阿波罗：添加骨架屏加载状态', '数据加载过程中展示骨架屏，替代传统的加载转圈。', 'open', NOW(), NOW()),
(46, '实现接口速率限制', '限制单 IP 请求频率，防止 API 被滥用。', 'open', NOW(), NOW()),
(47, '双子座：修复登出重定向', '用户点击登出后未正确跳转回登录页。', 'closed', NOW(), NOW()),
(48, '凤凰：支持拖拽排序', '允许用户通过拖拽方式重新排列列表项。', 'open', NOW(), NOW()),
(49, '更新法律合规文档', '更新隐私政策以符合最新的 GDPR 规定。', 'open', NOW(), NOW()),
(50, '发布前最终 QA', '执行完整的回归测试用例，确保无重大 Bug。', 'open', NOW(), NOW());

-- --------------------------------------------------------
-- Seed Ticket_Tags (Many-to-Many)
-- --------------------------------------------------------
INSERT INTO ticket_tags (ticket_id, tag_id) VALUES
-- 1. 修复 iOS 启动时的闪退问题 (iOS端, 缺陷Bug, 海盗项目)
(1, 1), (1, 18), (1, 6),
-- 2. 实现海盗项目的落地页 (Web端, 新功能, 海盗项目, 界面体验)
(2, 3), (2, 19), (2, 6), (2, 15),
-- 3. 优化搜索功能的数据库查询 (后端, 性能优化, 搜索功能, 数据库)
(3, 4), (3, 16), (3, 13), (3, 20),
-- 4. 阿波罗搜索栏添加自动补全 (Web端, 新功能, 阿波罗计划, 自动补全, 搜索功能)
(4, 3), (4, 19), (4, 7), (4, 10), (4, 13),
-- 5. 修复安卓端登录界面布局错乱 (安卓端, 缺陷Bug, 登录注册, 界面体验)
(5, 2), (5, 18), (5, 11), (5, 15),
-- 6. 重构支付网关集成 (后端, 代码重构, 支付模块)
(6, 4), (6, 17), (6, 12),
-- 7. Web端实现深色模式 (Web端, 新功能, 界面体验)
(7, 3), (7, 19), (7, 15),
-- 8. 双子座：添加推送通知功能 (iOS/安卓, 新功能, 双子座, 消息通知)
(8, 1), (8, 2), (8, 19), (8, 8), (8, 14),
-- 9. 修复凤凰后台服务的内存泄漏 (后端, 缺陷Bug, 凤凰, 性能优化)
(9, 4), (9, 18), (9, 9), (9, 16),
-- 10. 设计桌面端新版图标 (桌面端, 界面体验)
(10, 5), (10, 15),
-- 11. 海盗项目：实现用户注册流程 (Web端, 新功能, 海盗项目, 登录注册)
(11, 3), (11, 19), (11, 6), (11, 11),
-- 12. 阿波罗：修复导航栏抖动 (Web端, 缺陷Bug, 阿波罗计划, 界面体验)
(12, 3), (12, 18), (12, 7), (12, 15),
-- 13. 更新 API 接口文档 (后端)
(13, 4),
-- 14. 排查 API 响应缓慢问题 (后端, 性能优化, 缺陷Bug)
(14, 4), (14, 16), (14, 18),
-- 15. 为按钮添加无障碍标签 (Web端, 无障碍, 界面体验)
(15, 3), (15, 22), (15, 15),
-- 16. 双子座：修复头像上传失败 (iOS/安卓, 缺陷Bug, 双子座)
(16, 1), (16, 2), (16, 18), (16, 8),
-- 17. 实现“忘记密码”流程 (后端, Web端, 新功能, 登录注册)
(17, 4), (17, 3), (17, 19), (17, 11),
-- 18. 凤凰：添加数据导出功能 (Web端, 新功能, 凤凰)
(18, 3), (18, 19), (18, 9),
-- 19. 修正新手引导页的错别字 (界面体验, 缺陷Bug)
(19, 15), (19, 18),
-- 20. 升级 React 版本至 18 (Web端, 代码重构)
(20, 3), (20, 17),
-- 21. 海盗项目：添加无限滚动加载 (Web端, 新功能, 海盗项目, 界面体验)
(21, 3), (21, 19), (21, 6), (21, 15),
-- 22. 保护敏感环境变量 (后端, 安全隐私, 运维部署)
(22, 4), (22, 21), (22, 24),
-- 23. 阿波罗：修复货币格式显示 (Web端, 缺陷Bug, 阿波罗计划, 支付模块)
(23, 3), (23, 18), (23, 7), (23, 12),
-- 24. 为认证服务编写单元测试 (后端, 测试, 登录注册)
(24, 4), (24, 23), (24, 11),
-- 25. 双子座：增加实时聊天功能 (iOS/安卓, 新功能, 双子座)
(25, 1), (25, 2), (25, 19), (25, 8),
-- 26. 修复页脚的失效链接 (Web端, 缺陷Bug)
(26, 3), (26, 18),
-- 27. 凤凰：优化图表渲染性能 (Web端, 性能优化, 凤凰)
(27, 3), (27, 16), (27, 9),
-- 28. 添加多语言支持 (Web端, 新功能)
(28, 3), (28, 19),
-- 29. 海盗项目：修复 iPad 屏幕旋转 Bug (iOS端, 缺陷Bug, 海盗项目, 界面体验)
(29, 1), (29, 18), (29, 6), (29, 15),
-- 30. 管理员账号强制开启 2FA (后端, 安全隐私, 登录注册, 新功能)
(30, 4), (30, 21), (30, 11), (30, 19),
-- 31. 阿波罗：重新设计设置页面 (Web端, 界面体验, 阿波罗计划)
(31, 3), (31, 15), (31, 7),
-- 32. 修复 Docker 构建流水线 (运维部署, 缺陷Bug)
(32, 24), (32, 18),
-- 33. 双子座：接入社交账号登录 (iOS/安卓, 新功能, 双子座, 登录注册)
(33, 1), (33, 2), (33, 19), (33, 8), (33, 11),
-- 34. 重构 CSS 使用变量 (Web端, 代码重构, 界面体验)
(34, 3), (34, 17), (34, 15),
-- 35. 凤凰：修复日期选择器时区问题 (Web端, 缺陷Bug, 凤凰)
(35, 3), (35, 18), (35, 9),
-- 36. 添加埋点统计事件 (Web端, 数据分析, 新功能)
(36, 3), (36, 25), (36, 19),
-- 37. 海盗项目：改进错误提示 (Web端, 界面体验, 海盗项目)
(37, 3), (37, 15), (37, 6),
-- 38. 阿波罗：修复模态框点击外部不关闭 (Web端, 缺陷Bug, 阿波罗计划)
(38, 3), (38, 18), (38, 7),
-- 39. 优化图片资源体积 (Web端, 性能优化)
(39, 3), (39, 16),
-- 40. 双子座：实现搜索筛选器 (iOS/安卓, 新功能, 双子座, 搜索功能)
(40, 1), (40, 2), (40, 19), (40, 8), (40, 13),
-- 41. 修复预发布环境 CORS 问题 (后端, 缺陷Bug)
(41, 4), (41, 18),
-- 42. 凤凰：添加“回到顶部”按钮 (Web端, 界面体验, 凤凰)
(42, 3), (42, 15), (42, 9),
-- 43. 审查第三方依赖安全性 (安全隐私, 代码重构)
(43, 21), (43, 17),
-- 44. 海盗项目：修复默认头像显示 (Web端, 缺陷Bug, 海盗项目, 界面体验)
(44, 3), (44, 18), (44, 6), (44, 15),
-- 45. 阿波罗：添加骨架屏加载状态 (Web端, 界面体验, 阿波罗计划)
(45, 3), (45, 15), (45, 7),
-- 46. 实现接口速率限制 (后端, 安全隐私, 性能优化)
(46, 4), (46, 21), (46, 16),
-- 47. 双子座：修复登出重定向 (iOS/安卓, 缺陷Bug, 双子座, 登录注册)
(47, 1), (47, 2), (47, 18), (47, 8), (47, 11),
-- 48. 凤凰：支持拖拽排序 (Web端, 新功能, 凤凰)
(48, 3), (48, 19), (48, 9),
-- 49. 更新法律合规文档 (Web端, 新功能)
(49, 3), (49, 19),
-- 50. 发布前最终 QA (测试)
(50, 23);
